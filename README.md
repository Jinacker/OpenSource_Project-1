# OSS Project1 - MLB Player Stats 분석 스크립트

## 기본 정보
- 학번: 12211162  
- 이름: Jin Kim  
- 제출 파일: `2025_OSS_Project1.sh`  
- 입력 데이터: `2024_MLB_Player_Stats.csv` (총 455명의 MLB 타자 통계)

---

## 프로젝트 개요

본 스크립트는 Bash를 이용해 MLB 타자 통계 데이터를 분석하는 프로그램입니다.  
CSV 파일을 직접 파싱하고 다양한 조건으로 검색 및 출력할 수 있으며, 메뉴 기반 CLI 인터페이스로 구성되어 있습니다.  
사용자가 잘못된 값을 입력하거나 파일을 누락한 경우에도 안정적으로 동작하도록 **철저한 입력값 유효성 검사와 예외 처리**를 구현했습니다.

---

## 주요 기능 설명 및 구현 방식

### 1. 선수 이름으로 검색
- 사용자로부터 선수 이름을 받아 정확히 일치하는 경우에만 정보를 출력
- 출력 항목: 이름, 팀, 나이, WAR, 홈런, 타율
- `awk -v name="..."`으로 필터링
- 데이터 첫 줄(헤더)은 `NR > 1`로 제외
- 입력한 이름이 존재하지 않을 경우 `Error: Unknown Player Name !!` 출력 후 메뉴로 복귀

### 2. SLG 기준 상위 5명 출력
- SLG(Slugging Percentage)가 높은 순서대로 상위 5명 선수 출력
- 단, PA(Plate Appearances)가 502 이상인 선수만 대상
- `awk`로 PA 필터링, `sort -k 22 -nr`로 SLG 정렬
- 출력 항목: 이름, 팀, SLG, HR, RBI
- 사용자의 확인 입력(y/n)을 받고, 'n'이면 메뉴로 복귀

### 3. 팀 단위 통계 분석
- 팀 약자(NYY, LAD 등)를 입력받아 해당 팀 선수들의 평균 나이, 홈런 총합, 타점 총합을 계산
- 팀 약자는 미리 정의한 30개 팀 배열 안에서만 유효한 것으로 인정
- 해당 팀 소속 선수를 `grep ",$팀약자"`로 필터링 후 `awk`에서 누적 연산
- 존재하지 않는 팀 입력 시 에러 출력 및 메뉴로 복귀

### 4. 연령대 그룹별 SLG 상위 5명 비교
- 사용자가 3가지 그룹 중 선택:
  - Group A: 25세 미만
  - Group B: 25~30세
  - Group C: 30세 초과
- 각 그룹은 `awk`로 연령 조건 필터링 + `sort`로 SLG 내림차순 정렬 후 상위 5명 출력
- `PA > 502` 조건 필터링 포함
- 그룹 번호를 잘못 입력하면 에러 메시지 출력 후 메뉴로 복귀

### 5. 홈런 & 타율 조건 기반 검색
- 사용자로부터 최소 홈런 수(정수)와 최소 타율(예: 0.280 형식의 소수)를 입력받아 필터링
- 입력값은 정규표현식을 이용해 철저히 검사:
  - 홈런: `^[0-9]+$`
  - 타율: `^0\.[0-9]{3}$`
- 유효하지 않은 값 입력 시 에러 메시지 출력 후 `MENU`로 돌아감
- 조건에 맞는 선수들을 홈런 기준으로 정렬하여 출력
- 출력 항목: 이름, 팀, HR, BA, RBI, SLG

### 6. 팀별 리포트 출력
- 팀 약자 입력 시 해당 팀의 선수 목록을 리포트 형식으로 출력
- 상단에 현재 날짜 자동 출력 (`date +%Y/%m/%d`)
- 선수별 HR, RBI, AVG, OBP, OPS 정보를 정렬 출력
- 출력은 `awk printf`를 이용해 컬럼 간격을 맞춰 가독성 확보
- 팀에 해당하는 선수가 없을 경우 에러 처리 후 복귀

### 7. 프로그램 종료
- "Have a good day!" 메시지 출력 후 반복 종료 (`break`)

---

## 유효성 검사 및 예외 처리 상세 내용

- **스크립트 인자 확인**  
  - 실행 시 CSV 파일명을 인자로 반드시 전달해야 하며, 전달되지 않으면 다음 메시지 출력:
    ```bash
    usage: ./2025_OSS_Project1.sh file
    ```
- **CSV 파일 존재 여부 검사**
  - 전달된 파일이 존재하지 않을 경우:
    ```bash
    Error: File '파일명.csv' not found.
    ```
  - 이후 프로그램 실행 중단 (`exit 1`)

- **메뉴 번호 예외 처리**
  - 1~7이 아닌 숫자를 입력하면 `Error: Wrong COMMAND !!` 출력

- **입력값 유효성 검사** (모든 기능에 적용)
  - 정수 검사: `^[0-9]+$`
  - 소수 검사: `^0\.[0-9]{3}$`
  - 팀 이름은 미리 정의된 배열 내 값인지 확인
  - 잘못된 입력은 모두 에러 출력 후 메뉴로 자동 복귀 (`continue`)

---

## 구현에 사용된 명령어 및 로직

- 주요 명령어: `awk`, `grep`, `sort`, `head`, `printf`, `read`, `case`, `if`, `while`
- CSV 처리: 쉼표(,) 구분자 기반 `awk -F,`로 필드 분리
- 정렬: `sort -t, -k n -nr`로 필드 기준 정렬
- 조건 처리: `awk` 내부 조건문, `if` 구문, 정규표현식 사용
- 반복 처리: `while true` 루프로 메뉴 반복
- 포맷 출력: `awk printf`로 컬럼 정렬

---

## 실행 방법

```bash
chmod +x 2025_OSS_Project1.sh
./2025_OSS_Project1.sh 2024_MLB_Player_Stats.csv
